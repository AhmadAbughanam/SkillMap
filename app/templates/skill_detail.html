{% extends "base.html" %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="mb-0">{{ skill.name }}</h1>
  <a
    href="{{ url_for('skills.skills_list') }}"
    class="btn btn-outline-secondary"
  >
    <i class="bi bi-arrow-left me-1"></i> Back to Skills
  </a>
</div>

<div class="card shadow-sm mb-4">
  <div class="card-body">
    <h5 class="card-title">Details</h5>
    <p class="card-text">
      <strong>Category:</strong>
      <span class="badge bg-secondary fw-normal"
        >{{ skill.category or '—' }}</span
      >
    </p>
    <p class="card-text">
      {{ skill.description or 'No description provided.' }}
    </p>
    <hr />
    <a
      href="{{ url_for('skills.skill_edit', skill_id=skill.id) }}"
      class="btn btn-secondary"
    >
      <i class="bi bi-pencil-fill me-1"></i> Edit Skill
    </a>
  </div>
</div>

<div class="card shadow-sm mb-4">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0">Milestones</h5>
    <a
      href="{{ url_for('skills.milestone_create', skill_id=skill.id) }}"
      class="btn btn-primary"
    >
      <i class="bi bi-plus-lg me-1"></i> Add Milestone
    </a>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead>
          <tr>
            <th style="width: 50%">Note</th>
            <th>Progress Level</th>
            <th>Date</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for milestone in milestones %}
          <tr>
            <td>{{ milestone.note }}</td>
            <td>
              <span class="badge bg-info text-dark"
                >{{ milestone.progress_level or '—' }}</span
              >
            </td>
            <td>{{ milestone.timestamp.strftime('%Y-%m-%d') }}</td>
            <td class="text-end">
              <a
                href="{{ url_for('skills.milestone_edit', milestone_id=milestone.id) }}"
                class="btn btn-sm btn-outline-secondary"
              >
                <i class="bi bi-pencil"></i>
              </a>
              <form
                action="{{ url_for('skills.milestone_delete', milestone_id=milestone.id) }}"
                method="post"
                class="confirm-delete"
              >
                <button type="submit" class="btn btn-sm btn-outline-danger">
                  <i class="bi bi-trash"></i>
                </button>
              </form>
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="4" class="text-center text-muted p-4">
              No milestones added yet.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
